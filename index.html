<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>Vanity Address Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;background:#0b1220;color:#fff;font-family:Arial}
.center{display:flex;justify-content:center;align-items:center;height:100vh}
.card{background:#111827;padding:30px;border-radius:10px;width:360px}
input,button{width:100%;padding:10px;margin-top:10px;border-radius:6px;border:none}
button{background:#00ff99;font-weight:bold;cursor:pointer}
.worker{background:#1f2937;height:20px;margin:10px 0;border-radius:4px;overflow:hidden}
.bar{height:100%;width:0%;background:#22c55e}
.hidden{display:none}
pre{background:#020617;padding:10px;border-radius:6px}
</style>
</head>

<body>

<!-- ç™»å½•é¡µ -->
<div id="loginPage" class="center">
  <div class="card">
    <h2>éªŒè¯ç ç™»å½•</h2>
    <canvas id="captcha" width="120" height="40"></canvas>
    <input id="captchaInput" placeholder="è¾“å…¥éªŒè¯ç ">
    <button onclick="login()">ç™»å½•</button>
  </div>
</div>

<!-- æ§åˆ¶å° -->
<div id="dashboard" class="hidden">
  <div style="padding:20px;max-width:600px;margin:auto">
    <h1>é“åœ°å€ç”Ÿæˆæ§åˆ¶å°</h1>

    <input id="prefix" value="0x888888" placeholder="ETH é“å·å‰ç¼€">

    <div id="workers"></div>

    <button onclick="start()">å¯åŠ¨ 5 ä¸ªè¿›ç¨‹</button>

    <h3>ğŸ¯ æ‰¾åˆ°çš„é“å·</h3>
    <pre id="result"></pre>
  </div>
</div>

<script>
/* ===== DOM å¼•ç”¨ï¼ˆå…³é”®ä¿®å¤ç‚¹ï¼‰ ===== */
const workersDiv = document.getElementById("workers");
const result = document.getElementById("result");

/* ========= éªŒè¯ç  ========= */
let captchaText="";
function drawCaptcha(){
  const chars="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";
  captchaText="";
  for(let i=0;i<4;i++) captchaText+=chars[Math.floor(Math.random()*chars.length)];
  const c=document.getElementById("captcha");
  const ctx=c.getContext("2d");
  ctx.fillStyle="#020617";ctx.fillRect(0,0,c.width,c.height);
  ctx.fillStyle="#00ff99";ctx.font="22px Arial";
  ctx.fillText(captchaText,15,28);
}
drawCaptcha();
captcha.onclick=drawCaptcha;

function login(){
  if(captchaInput.value.toUpperCase()!==captchaText){
    alert("éªŒè¯ç é”™è¯¯");drawCaptcha();return;
  }
  document.getElementById("loginPage").classList.add("hidden");
  document.getElementById("dashboard").classList.remove("hidden");
}

/* ========= Worker ä»£ç  ========= */
const workerCode = `
function randomHex(len){
  const arr=new Uint8Array(len/2);
  crypto.getRandomValues(arr);
  return Array.from(arr).map(b=>b.toString(16).padStart(2,"0")).join("");
}

onmessage=e=>{
  const prefix=e.data.prefix.toLowerCase();
  let tested=0;

  while(true){
    const priv="0x"+randomHex(64);
    const addr="0x"+randomHex(40);
    tested++;

    if(addr.startsWith(prefix)){
      postMessage({found:true,addr,priv,tested});
      break;
    }
    if(tested%3000===0){
      postMessage({found:false,tested});
    }
  }
};
`;

const blob=new Blob([workerCode],{type:"application/javascript"});
const workerURL=URL.createObjectURL(blob);
let workers=[];

/* ========= å¯åŠ¨ ========= */
function start(){
  workers.forEach(w=>w.terminate());
  workers=[];
  workersDiv.innerHTML="";
  result.textContent="";

  const prefix=document.getElementById("prefix").value.toLowerCase();

  for(let i=0;i<5;i++){
    const wrap=document.createElement("div");
    wrap.className="worker";
    const bar=document.createElement("div");
    bar.className="bar";
    wrap.appendChild(bar);
    workersDiv.appendChild(wrap);

    const w=new Worker(workerURL);
    workers.push(w);

    w.onmessage=e=>{
      if(e.data.found){
        bar.style.width="100%";
        result.textContent =
          "åœ°å€: "+e.data.addr+"\\n"+
          "ç§é’¥: "+e.data.priv+"\\n"+
          "æµ‹è¯•æ¬¡æ•°: "+e.data.tested;
        workers.forEach(x=>x.terminate());
      }else{
        bar.style.width=Math.min(100,e.data.tested/2000)+"%";
      }
    };

    w.postMessage({prefix});
  }
}
</script>

</body>
</html>
